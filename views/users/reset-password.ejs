<%
_locals.title = "Reset your password";
_locals.noNav = true;
%>
<link rel="stylesheet" href="/css/dynamic-password-validation.css"/>

<h1 class="visually-hidden">Reset password</h1>
<div class="wrapper-half main-content" role="main">

	<form method="post" id="resetPasswordForm" class="form-credentials card">
		<fieldset class="card-body">
			<legend>Reset your password</legend>

			<div class="flow">
				<%/* Include email as a hidden text input so that password manager knows which login email to link to. */%>
				<input type="text" name="email" value="<%= email %>" style="display:none;" />

				<div class="form-floating mb-3">
					<input class="form-control" id="password" name="password" type="password" autocomplete="new-password" />
					<label class="form-label" for="password">New password</label>
					<%- validationMessage('password') %>
					<div class="invalid-feedback" id="passwordDynamicFeedback">
						Please enter a stronger password
					</div>
					<div class="validation-feedback small" id="feedbackLowercase">One lowercase</div>
					<div class="validation-feedback small" id="feedbackUppercase">One uppercase</div>
					<div class="validation-feedback small" id="feedback8Chars">8 characters min.</div>
				</div>

				<button class="btn btn-primary btn-lg btn-block">Set new password</button>

			</div><!-- .flow-->
		</fieldset>
	</form>

</div>

<script src="/js/forms.js"></script>
<script>
	var password = document.getElementById('password');
	var resetPasswordForm = document.getElementById('resetPasswordForm');

	forms.addDynamicPasswordValidation(resetPasswordForm, password);
	forms.addPasswordVisibilityToggle(password);
</script>